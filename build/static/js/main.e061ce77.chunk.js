(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{19:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),o=a.n(r),c=a(7),s=a.n(c),i=(a(18),a(19),a(3)),l=a(4),u=a(6),h=a(5),d=a(8),g=(a(20),a(12)),m=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(g.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state.query,n=e.props.onSubmit;if(!a.trim())return d.c.error("Input search query.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:d.b}),e.setState({query:""});n(a.trim().toLowerCase()),e.setState({query:""})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.query;return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",disabled:!e,children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"query",value:e,onChange:this.handleChange})]})})}}]),a}(r.Component),b=a(11),j=a(10),p=a.n(j),f=(a(41),function(e){var t=e.src,a=e.alt,r=e.largeImageURL,o=e.getLargeImageURL;return Object(n.jsx)("li",{className:"ImageGalleryItem",onClick:function(){o(r,a)},children:Object(n.jsx)("img",{src:t,alt:a,className:"ImageGalleryItem-image"})})}),S=function(e){var t=e.onClick;return Object(n.jsx)("button",{type:"button",className:"Button",onClick:function(){return t()},children:"Load more"})},y=document.querySelector("#modal-root"),v=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleClickBackdrop=function(t){t.target===t.currentTarget&&e.props.onClose()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.children;return Object(c.createPortal)(Object(n.jsx)("div",{className:"Overlay",onClick:this.handleClickBackdrop,children:Object(n.jsx)("div",{className:"Modal",children:e})}),y)}}]),a}(r.Component);function O(e,t){return fetch("".concat("https://pixabay.com/api/?image_type=photo&orientation=horizontal","&key=").concat("19265918-53e7e1b4cc966fb2ac418e7ff","&q=").concat(e,"&page=").concat(t,"&per_page=").concat(12)).then((function(t){return t.ok?t.json():Promise.reject(new Error('\u041f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 "'.concat(e,'" \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!')))})).then((function(e){return e.hits}))}var w=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:e.props.query,page:1,images:[],isLoading:!1,btnStatus:!1,showModal:!1,largeImageURL:"",imageAlt:"",error:null,imageStatus:"loading"},e.handleScroll=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.handleLoadNextPage=function(){var t=e.state.page+1;e.setState({page:t})},e.handleSwitchModalStatus=function(){e.setState((function(e){return{showModal:!e.showModal,imageStatus:"loading"}}))},e.handleGetLargeImageURL=function(t,a){e.handleSwitchModalStatus(),t?e.setState({largeImageURL:t}):e.setState({largeImageURL:""}),a?e.setState({imageAlt:a}):e.setState({imageAlt:""})},e.handleImageLoaded=function(){e.setState({imageStatus:"loaded"})},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=e.query,r=t.page,o=this.props.query,c=this.state.page;return n!==o?(this.setState({images:[],page:1,query:o,isLoading:!0,btnStatus:!1}),void O(o,1).then((function(e){a.setState({images:e}),e.length>0&&a.setState({btnStatus:!0})})).catch((function(e){a.setState({error:e})})).finally((function(){a.handleScroll(),a.setState({isLoading:!1})}))):r!==c?(this.setState({isLoading:!0,btnStatus:!1}),n===o&&1===c&&this.setState({images:[]}),void O(o,c).then((function(e){var t=Object(b.a)(a.state.images);t.push.apply(t,Object(b.a)(e)),a.setState({images:t,page:c}),e.length>0&&a.setState({btnStatus:!0})})).catch((function(e){return a.setState({error:e})})).finally((function(){a.handleScroll(),a.setState({isLoading:!1})}))):void 0}},{key:"render",value:function(){var e=this,t=this.state,a=t.images,r=t.isLoading,o=t.btnStatus,c=t.showModal,s=t.largeImageURL,i=t.imageAlt,l=t.error,u=t.imageStatus;return Object(n.jsxs)(n.Fragment,{children:[l&&Object(n.jsx)("h1",{children:l.message}),Object(n.jsx)("ul",{className:"ImageGallery",children:a.map((function(t,a){var r=t.webformatURL,o=t.tags,c=t.largeImageURL;return Object(n.jsx)(f,{src:r,alt:o,largeImageURL:c,getLargeImageURL:e.handleGetLargeImageURL},a)}))}),r&&Object(n.jsx)(p.a,{visible:"true",type:"Bars",color:"#3f51b5",height:50,width:50,className:"loader"}),o&&Object(n.jsx)(S,{onClick:this.handleLoadNextPage}),c&&Object(n.jsx)(v,{onClose:this.handleSwitchModalStatus,children:"loading"===u?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{src:s,alt:i,onLoad:this.handleImageLoaded}),Object(n.jsx)(p.a,{visible:"true",type:"ThreeDots",color:"#fff",height:50,width:50,className:"loaderModal"})]}):Object(n.jsx)("img",{src:s,alt:i})})]})}}]),a}(r.Component),x=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleQueryFromSearchbar=function(t){e.setState({query:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(m,{onSubmit:this.handleQueryFromSearchbar}),Object(n.jsx)(w,{query:this.state.query}),Object(n.jsx)(d.a,{})]})}}]),a}(r.Component);s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(x,{})}),document.querySelector("#root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e061ce77.chunk.js.map